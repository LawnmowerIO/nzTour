!function(){function t(t,e,s,i){t[o](n+e,"wheel"==r?s:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==r?(e.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-1/40*t.wheelDeltaX)):e.deltaY=t.detail,s(e)},i||!1)}var e=angular.module("nzTour",[]);if(e.factory("nzTour",["$q","$rootScope","$compile","$timeout",function(t,e,o,r){function n(t){if(!t)throw"No Tour Specified!";if(!t.steps.length)throw"No steps were found in that tour!";return k.current?s().then(function(){return c(t)}):c(t)}function s(){return p().then(function(){return!1}).then(u).then(v)}function i(){k.current&&x()}function a(){return k.current||k.current.reject(),p().then(m).then(function(){k.current.step++}).then(g)}function f(){return p().then(function(){return k.current.step>0?(k.current.step--,!0):t.reject()}).then(g)}function l(e){var o=t.defer();return e>0&&e<=k.current.tour.steps.length?p().then(function(){k.current.step=e}).then(g):(o.reject(),o.promise)}function c(e){e.config=angular.extendDeep({},k.config,e.config);var o=!0;return angular.forEach(e.config.placementPriority,function(t){o&&-1==k.config.placementPriority.indexOf(t)&&(o=!1,e.config.placementOptions=k.config.placementPriority)}),k.current={tour:e,step:0,promise:t.defer()},u(!0,e),g(),k.current.promise.promise}function u(e){var n=t.defer();return e?(k.box=angular.element(o('<nz-tour class="hidden"></nz-tour>')(k)),angular.element(k.body).append(k.box),r(function(){k.box.removeClass("hidden")},10),n.resolve()):(k.box.addClass("hidden"),r(function(){k.box.remove(),k.$broadcast("remove"),n.resolve()},k.current.tour.config.animationDuration)),n.promise}function g(){return h().then(d)}function h(){var e=t.defer();return k.current.tour.steps[k.current.step].before?k.current.tour.steps[k.current.step].before():(e.resolve(),e.promise)}function d(){var e=t.defer();return k.$broadcast("step",k.current.step),e.resolve(),e.promise}function p(){var e=t.defer();return k.current.tour.steps[k.current.step].after?k.current.tour.steps[k.current.step].after():(e.resolve(),e.promise)}function m(){var e=t.defer();return k.current.step==k.current.tour.steps.length-1&&(w(),e.reject()),e.resolve(),e.promise}function w(){u(!1).then(function(){return k.current.promise.resolve(),k.current=!1,!0})}function v(){return k.current.promise.reject(),k.current=!1,!0}function x(){}function b(t,e){var o=!1;return function(){o||(t.call(),o=!0,r(function(){o=!1},e))}}function T(t,e,o){var r;return function(){var n=this,s=arguments,i=function(){r=null,o||t.apply(n,s)},a=o&&!r;clearTimeout(r),r=setTimeout(i,e),a&&t.apply(n,s)}}var k=e.$new();return angular.extend(k,{config:{mask:{visible:!0,clickThrough:!1,clickExit:!1,scrollThrough:!0,color:"rgba(0,0,0,.7)"},dark:!1,scrollBox:-1!=navigator.userAgent.indexOf("AppleWebKit")?"body":"html",previousText:"Previous",nextText:"Next",finishText:"Finish",animationDuration:400,placementPriority:["bottom","right","top","left"]},current:!1,body:angular.element("body"),box:!1,start:n,stop:s,pause:i,next:a,previous:f,gotoStep:l,throttle:b,debounce:T}),window.nzTour=k,k}]),e.directive("nzTour",["$q","$timeout","$window",function(t){return{template:['<div id="nzTour-box-wrap">','   <div id="nzTour-box">','        <div id="nzTour-tip" class="top center"></div>','        <div id="nzTour-step">{{view.step + 1}}</div>','        <div id="nzTour-length">{{view.length}}</div>','        <div id="nzTour-close" ng-click="stop()">&#10005</div>','        <div id="nzTour-content">','           <div id="nzTour-inner-content"></div>',"        </div>",'        <div id="nzTour-actions">','            <button id="nzTour-previous" ng-show="view.step > 0" ng-click="previous()" class="ng-hide">{{view.previousText}}</button>','            <button id="nzTour-next" ng-show="view.step >= 0" ng-click="next()" class="success" class="ng-hide">{{view.nextText}}</button>',"        </div>","    </div>","</div>",'<div class="nzTour-masks" ng-show="current.tour.config.mask.visible" ng-click="tryStop()">','    <div class="mask top"></div>','    <div class="mask right"></div>','    <div class="mask bottom"></div>','    <div class="mask left"></div>',"</div>"].join(" "),link:function(e,o){function r(t){if(t.which>=49&&t.which<=57)return void e.gotoStep(t.which-48);switch(t.which){case 37:return void e.previous();case 39:case 13:return void e.next();case 27:return void e.stop();case 38:case 40:E()}}function n(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}function s(t){var e=D.masks.top.add(D.masks.right).add(D.masks.bottom).add(D.masks.left);t?(y=!0,e.css("transition","all "+v.animationDuration+"ms ease")):(y=!1,e.css("transition","all 0"))}function i(t){var e=D.wrap.add(D.box).add(D.tip);t?e.css("transition","all "+v.animationDuration+"ms ease"):e.css("transition","all 0")}function a(t){function e(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}var o;o="DOMMouseScroll"==t.type?-40*t.detail:t.wheelDelta;var r=o>0,n=D.content.scrollTop();return r&&!n?e(t):r||innerContent.height()-content.height()!=n?void 0:e(t)}function f(){b||(B=!0,s(!1),M(),u().then(g).then(h).then(g).then(p))}function l(){B=!1,s(!0)}function c(t,o){D.target=!1;var r=e.current.tour.steps;return e.view={step:o,length:r.length,previousText:v.previousText,nextText:o==r.length-1?v.finishText:v.nextText},D.innerContent.html(r[o].content),D.content.scrollTop(0),b=!0,u(o).then(g).then(h).then(g).then(p).then(function(){b=!1})}function u(o){var r=t.defer();if(D.target)r.resolve(x);else{var n=angular.element(e.current.tour.steps[o].target);n.length?(D.target=angular.element(n[0]),r.resolve(D.target)):r.resolve(!1)}return r.promise}function g(){var e=t.defer();return D.target?(R.window={width:D.window.width(),height:D.window.height()},R.scroll={width:D.scroll.outerWidth(),height:D.scroll.outerHeight(),offset:D.scroll.offset(),scroll:{top:D.scroll.scrollTop(),left:D.scroll.scrollLeft()}},angular.forEach(R.scroll.offset,function(t,e){R.scroll.offset[e]=Math.ceil(t)}),R.scroll.height=R.scroll.height+R.scroll.offset.top>R.window.height?R.window.height:R.scroll.height,R.scroll.width=R.scroll.width+R.scroll.offset.left>R.window.width?R.window.width:R.scroll.width,R.scroll.offset.toBottom=R.scroll.height+R.scroll.offset.top,R.scroll.offset.toRight=R.scroll.width+R.scroll.offset.left,R.scroll.offset.fromBottom=R.window.height-R.scroll.offset.top-R.scroll.height,R.scroll.offset.fromRight=R.window.width-R.scroll.offset.left-R.scroll.width,R.target={width:D.target.outerWidth(),height:D.target.outerHeight(),offset:D.target.offset()},("body"==v.scrollBox||"html"==v.scrollBox)&&(R.target.offset.top-=R.scroll.scroll.top),angular.forEach(R.target.offset,function(t,e){R.target.offset[e]=Math.ceil(t)}),R.target.offset.toBottom=R.target.offset.top+R.target.height,R.target.offset.toRight=R.target.offset.left+R.target.width,R.target.offset.fromBottom=R.window.height-R.target.offset.top-R.target.height,R.target.offset.fromRight=R.window.width-R.target.offset.left-R.target.width,R.target.margins={offset:{top:R.target.offset.top-T,left:R.target.offset.left-T,toBottom:R.target.offset.toBottom+T,toRight:R.target.offset.toRight+T,fromBottom:R.target.offset.fromBottom-T,fromRight:R.target.offset.fromRight-T},height:R.target.height+2*T,right:R.target.offset.fromRight+2*T},e.resolve(),e.promise):(e.resolve(),e.promise)}function h(){var e=t.defer();if(!D.target)return e.resolve(),e.promise;var o=d();return o?D.scroll.animate({scrollTop:o},B?0:v.animationDuration,function(){e.resolve()}):e.resolve(),e.promise}function d(){return R.target.margins.height>R.scroll.height?R.target.offset.toBottom-k<R.scroll.offset.top?R.scroll.scroll.top-(R.scroll.offset.top-(R.target.offset.toBottom-k)):R.target.offset.top+k>R.scroll.offset.toBottom?R.scroll.scroll.top+(R.target.offset.top+k-R.scroll.offset.toBottom):!1:R.target.margins.offset.top<R.scroll.offset.top?R.scroll.scroll.top-(R.scroll.offset.top-R.target.margins.offset.top):R.target.margins.offset.toBottom>R.scroll.offset.toBottom?R.scroll.scroll.top+(R.target.margins.offset.toBottom-R.scroll.offset.toBottom):!1}function p(){return t.all([m(),w()])}function m(){function e(){return R.target.margins.offset.fromBottom>k?R.target.width>z?(s("bottom","center"),!0):R.target.offset.fromRight+R.target.width>z?(s("bottom","left"),!0):(s("bottom","right"),!0):!1}function o(){return R.target.margins.offset.fromRight>z?R.target.margins.height>R.scroll.height?R.target.offset.top>R.window.height/2?(i("right","top"),!0):R.target.offset.fromBottom>R.window.height/2?(i("right","bottom"),!0):(i("right","center",!0),!0):R.target.height>k?(i("right","center"),!0):R.target.offset.fromBottom+R.target.height>k?(i("right","top"),!0):(i("right","bottom"),!0):!1}function r(){return R.target.margins.offset.left>z?R.target.margins.height>R.scroll.height?(i("left","center",!0),!0):R.target.height>k?(i("left","center"),!0):R.target.offset.fromBottom+R.target.height>k?(i("left","top"),!0):(i("left","bottom"),!0):!1}function n(){return R.target.margins.offset.top>k?R.target.width>z?(s("top","center"),!0):R.target.offset.fromRight+R.target.width>z?(s("top","left"),!0):(s("top","right"),!0):!1}function s(t,e){var o,r,n,s,i;"top"==t?(o=R.target.margins.offset.top,i="bottom",s="-100%"):(o=R.target.margins.offset.toBottom,i="top",s="0"),"right"==e?(r=R.target.offset.toRight,n="-100%"):"center"==e?(r=R.target.offset.left+R.target.width/2,n="-50%"):(r=R.target.offset.left,n="0"),D.wrap.css({left:r+"px",top:o+"px",transform:"translate("+n+","+s+")"}),D.tip.attr("class","vertical "+i+" "+e)}function i(t,e,o){var r,n,s,i,a;"right"==t?(n=R.target.margins.offset.toRight,a="left",s="0"):(n=R.target.margins.offset.left,a="right",s="-100%"),o?(r=R.window.height/2,i="-50%"):"top"==e?(r=R.target.offset.top,i="0"):"center"==e?(r=R.target.offset.top+R.target.height/2,i="-50%"):(r=R.target.offset.toBottom,i="-100%"),D.wrap.css({left:n+"px",top:r+"px",transform:"translate("+s+","+i+")"}),D.tip.attr("class","horizontal "+a+" "+e)}function a(t,e){var o,r,n,s;"top"==t?(o=R.target.margins.offset.top<R.scroll.offset.top?T:R.target.offset.top,n="0"):(o=R.target.margins.offset.toBottom>R.scroll.offset.toBottom?R.scroll.offset.toBottom-T:R.target.offset.toBottom,n="-100%"),"right"==e?(r=R.target.offset.left+R.target.width,s="-100%"):"center"==e?(r=R.target.offset.left+R.target.width/2,s="-50%"):(r=R.target.offset.left,s="0"),D.wrap.css({left:r+"px",top:o+"px",transform:"translate("+s+","+n+")"}),D.tip.attr("class","hidden")}function f(){D.wrap.css({left:"50%",top:"50%",transform:"translate(-50%, -50%)",margin:"0"}),D.tip.attr("class","hidden")}var l=t.defer();if(!D.target)return void f();var c={bottom:e,right:o,left:r,top:n},u=!1;return angular.forEach(v.placementPriority,function(t){!u&&c[t]()&&(u=!0,l.resolve())}),u?l.promise:(a("bottom","center"),void l.resolve())}function w(){var e=t.defer();return D.target?(D.masks.top.css({height:R.target.offset.top+"px",top:R.target.offset.top<0?R.target.offset.top+"px":0}),D.masks.bottom.css({height:R.target.offset.fromBottom+"px",bottom:R.target.offset.fromBottom<0?R.target.offset.fromBottom+"px":0}),D.masks.left.css({top:R.target.offset.top+"px",height:R.target.height+"px",width:R.target.offset.left+"px"}),D.masks.right.css({top:R.target.offset.top+"px",height:R.target.height+"px",width:R.target.offset.fromRight+"px"}),e.resolve(),e.promise):(D.masks.top.css({height:"0px"}),D.masks.bottom.css({height:"0px"}),D.masks.left.css({top:"0px",height:"100%",width:"0px"}),void D.masks.right.css({top:"0px",height:"100%",width:"0px"}))}var v=e.current.tour.config,x=!1,b=!1,T=15,k=120,z=250,B=!1,y=!0,D={window:angular.element(window),wrap:o.find("#nzTour-box-wrap"),box:o.find("#nzTour-box"),tip:o.find("#nzTour-tip"),step:o.find("#nzTour-step"),close:o.find("#nzTour-close"),content:o.find("#nzTour-content"),innerContent:o.find("#nzTour-inner-content"),actions:o.find("#nzTour-actions"),previous:o.find("#nzTour-previous"),next:o.find("#nzTour-next"),masks:{wrap:o.find(".nzTour-masks"),top:o.find(".nzTour-masks .top"),right:o.find(".nzTour-masks .right"),bottom:o.find(".nzTour-masks .bottom"),left:o.find(".nzTour-masks .left")},scroll:angular.element(v.scrollBox),target:!1},R={window:{},scroll:{},target:{}};s(!0),i(!0),D.masks.wrap.css("pointer-events",v.mask.clickThrough?"none":"all"),v.dark&&(D.box.addClass("dark-box"),T=7),D.masks.top.add(D.masks.right).add(D.masks.bottom).add(D.masks.left).css({"background-color":v.mask.color}),e.$on("step",c);var E=e.throttle(f,16),M=e.debounce(l,100);D.window.bind("keydown",r),D.window.bind("resize scroll",E),window.addWheelListener(window,E),D.content.bind("scroll",a),window.addWheelListener(D.content[0],a),v.mask.scrollThrough===!1&&window.addWheelListener(D.masks[0],n),e.$on("remove",function(){D.window.unbind("resize scroll",E),D.window.unbind("keydown",r),D.content.unbind("scroll",a),v.mask.scrollThrough===!1}),e.tryStop=function(){v.mask.clickExit&&e.stop()}}}}]),window.angular.extendDeep=function s(t){return angular.forEach(arguments,function(e){e!==t&&angular.forEach(e,function(e,o){t[o]&&t[o].constructor&&t[o].constructor===Object?s(t[o],e):t[o]=e})}),t},!window.addWheelListener){var o,r,n="";window.addEventListener?o="addEventListener":(o="attachEvent",n="on"),r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",window.addWheelListener=function(e,o,n){t(e,r,o,n),"DOMMouseScroll"==r&&t(e,"MozMousePixelScroll",o,n)}}}();