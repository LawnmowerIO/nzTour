!function(){function t(t,e,i,u){t[r](n+e,"wheel"==o?i:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==o?(e.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-1/40*t.wheelDeltaX)):e.deltaY=t.detail,i(e)},u||!1)}var e=angular.module("nzTour",[]);if(e.factory("nzTour",["$q","$rootScope","$compile","$timeout",function(t,e,r,o){function n(t){if(!t)throw"No Tour Specified!";if(!t.steps.length)throw"No steps were found in that tour!";return z.current?i().then(function(){return a(t)}):a(t)}function i(){return g().then(function(){return!1}).then(f).then(b)}function u(){z.current&&x()}function s(){return z.current||z.current.reject(),g().then(v).then(m).then(h)}function c(){return g().then(function(){return z.current.step>0?(z.current.step--,!0):t.reject()}).then(h)}function l(e){var r=t.defer();return e>0&&e<=z.current.tour.steps.length?(z.current.step=e-2,h(!0)):(r.reject(),r.promise)}function a(e){return e.config=angular.extendDeep({},z.config,e.config),z.current={tour:e,step:0,promise:t.defer()},f(!0,e),h(),z.current.promise.promise}function f(e){var n=t.defer();return e?(z.box=angular.element(r('<nz-tour class="hidden"></nz-tour>')(z)),angular.element(z.body).append(z.box),o(function(){z.box.removeClass("hidden")},10),n.resolve()):(z.box.addClass("hidden"),o(function(){z.box.remove(),z.$broadcast("remove"),n.resolve()},z.current.tour.config.animationDuration)),n.promise}function h(){return d().then(p)}function d(){var e=t.defer();return z.current.tour.steps[z.current.step].before?z.current.tour.steps[z.current.step].before():(e.resolve(),e.promise)}function p(){var e=t.defer();return z.$broadcast("step",z.current.step),e.resolve(),e.promise}function g(){var e=t.defer();return z.current.tour.steps[z.current.step].after?z.current.tour.steps[z.current.step].after():(e.resolve(),e.promise)}function v(){var e=t.defer();return z.current.step==z.current.tour.steps.length-1&&(w(),e.reject()),e.resolve(),e.promise}function m(){var e=t.defer();return z.current.step++,e.resolve(),e.promise}function w(){f(!1).then(function(){return z.current.promise.resolve(),z.current=!1,!0})}function b(){return z.current.promise.reject(),z.current=!1,!0}function x(){}function T(t,e){var r=!1;return function(){r||(t.call(),r=!0,o(function(){r=!1},e))}}var z=e.$new();return angular.extend(z,{config:{mask:{visible:!0,clickThrough:!1,clickExit:!1,scrollThrough:!0,color:"rgba(0,0,0,.7)"},dark:!1,scrollBox:-1!=navigator.userAgent.indexOf("AppleWebKit")?"body":"html",previousText:"Previous",nextText:"Next",finishText:"Finish",animationDuration:400,placementPriority:["bottom","right","top","left"]},current:!1,body:angular.element("body"),box:!1,start:n,stop:i,pause:u,next:s,previous:c,gotoStep:l,throttle:T}),window.nzTour=z,z}]),e.directive("nzTour",["$q","$timeout","$window",function(t,e){return{template:['<div id="nzTour-box-wrap">','   <div id="nzTour-box">','        <div id="nzTour-tip" class="top center"></div>','        <div id="nzTour-step">{{view.step + 1}}</div>','        <div id="nzTour-length">{{view.length}}</div>','        <div id="nzTour-close" ng-click="stop()">&#10005</div>','        <div id="nzTour-content">','           <div id="nzTour-inner-content"></div>',"        </div>",'        <div id="nzTour-actions">','            <button id="nzTour-previous" ng-show="view.step > 0" ng-click="previous()" class="ng-hide">{{view.previousText}}</button>','            <button id="nzTour-next" ng-show="view.step >= 0" ng-click="next()" class="success" class="ng-hide">{{view.nextText}}</button>',"        </div>","    </div>","</div>",'<div class="nzTour-masks" ng-show="current.tour.config.mask.visible" ng-click="tryStop()">','    <div class="mask top"></div>','    <div class="mask right"></div>','    <div class="mask bottom"></div>','    <div class="mask left"></div>',"</div>"].join(" "),link:function(r,o){function n(t){switch(t.which){case 37:return void r.previous();case 39:return void r.next();case 27:return void r.stop()}}function i(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}function u(t){var e=x.top.add(x.right).add(x.bottom).add(x.left);t?e.css("transition","all "+r.current.tour.config.animationDuration+"ms ease"):e.css("transition","all 0")}function s(t){var e=T.add(z).add(k);t?e.css("transition","all "+r.current.tour.config.animationDuration+"ms ease"):e.css("transition","all 0")}function c(){M||(S=!0,L&&u(!1),f(r.view.step))}function l(t){function e(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}var r="DOMMouseScroll"==t.type||"MozMousePixelScroll"==t.type?-40*t.originalEvent.detail:t.originalEvent.wheelDelta,o=r>0,n=D.scrollTop();return o&&!n?e(t):o||y.height()-D.height()!=n?void 0:e(t)}function a(t,e){return W=!1,r.view={step:e,length:r.current.tour.steps.length,previousText:r.current.tour.config.previousText,nextText:e==r.current.tour.steps.length-1?r.current.tour.config.finishText:r.current.tour.config.nextText},y.html(r.current.tour.steps[e].content),D.scrollTop(0),u(!0),S=M=!1,f(e)}function f(t){return h(r.current.tour.steps[t].target).then(d).then(function(t){return M=!1,t}).then(p)}function h(e){var r=t.defer(),o=angular.element(e);return o.length?W?r.resolve(W):(W=angular.element(o[0]),r.resolve(W)):r.resolve(!1),r.promise}function d(e){function o(){if(e.outerHeight()>s-2*E){if(a>c+s-$)return"large-below";if(c>h-$)return"large-above";if(h>l||c>a)return"large-visible"}return c>=a-E?"small-above":h+E>=c+s?"small-below":!0}function n(o){var n,i=t.defer();return o.indexOf("large")>-1?"large-below"==o?n=a-s/2:"large-above"==o&&(n=a+f-s/2):n="small-below"==o?a-s+f+E:a-E,M=!0,b.animate({scrollTop:n},S?0:r.current.tour.config.animationDuration,function(){i.resolve(e),S=!1,u(!0)}),i.promise}var i=t.defer();if(!e)return i.resolve(),i.promise;var s=P.viewHeight=w.height()-b.offset().top,c=P.boxScrollTop=b.scrollTop(),l=P.boxScrollBottom=c+s,a=P.elTop=e.offset().top,f=P.elHeight=e.outerHeight(),h=P.elBottom=a+f,d=o(e);return d!==!0?n(d):(i.resolve(e),i.resolve(e),i.promise)}function p(o){var n=t.defer();if(!o)return v(),void m();var i=g(o);return v(i),m(i),e(function(){n.resolve()},r.current.tour.config.animationDuration),n.promise}function g(t){var e={top:t.offset().top-b.scrollTop()+b.offset().top,left:t.offset().left-b.scrollLeft()+b.offset().left,width:t.outerWidth(),height:t.outerHeight()},r={width:w.width(),height:w.height()-b.offset().top};return{width:e.width,height:e.height,top:e.top,left:e.left,bottom:r.height-e.top-e.height,right:r.width-e.left-e.width}}function v(t){function e(){return t.bottom>$?t.width>H?(u("bottom","center"),!0):t.right+t.width>H?(u("bottom","left"),!0):(u("bottom","right"),!0):!1}function o(){return t.right>H?t.height>P.viewHeight?t.top>P.viewHeight/2?(s("right","top"),!0):t.bottom>P.viewHeight/2?(s("right","bottom"),!0):(s("right","center",!0),!0):t.height>$?(s("right","center"),!0):t.bottom+t.height>$?(s("right","top"),!0):(s("right","bottom"),!0):!1}function n(){return t.left>H?t.height>P.viewHeight?(s("left","center",!0),!0):t.height>$?(s("left","center"),!0):t.bottom+t.height>$?(s("left","top"),!0):(s("left","bottom"),!0):!1}function i(){return t.top>$?t.width>H?(u("top","center"),!0):t.right+t.width>H?(u("top","left"),!0):(u("top","right"),!0):!1}function u(e,r){var o,n,i,u,s;"top"==e?(o=t.top-E,s="bottom",u="-100%"):(o=t.top+t.height+E,s="top",u="0"),"right"==r?(n=t.left+t.width,i="-100%"):"center"==r?(n=t.left+t.width/2,i="-50%"):(n=t.left,i="0"),T.css({left:n+"px",top:o+"px",transform:"translate("+i+","+u+")"}),k.attr("class","vertical "+s+" "+r)}function s(e,r,o){var n,i,u,s,c;"right"==e?(i=t.left+t.width+E,c="left",u="0"):(i=t.left-E,c="right",u="-100%"),o?(n=P.viewHeight/2,s="-50%"):"top"==r?(n=t.top,s="0"):"center"==r?(n=t.top+t.height/2,s="-50%"):(n=t.top+t.height,s="-100%"),T.css({left:i+"px",top:n+"px",transform:"translate("+u+","+s+")"}),k.attr("class","horizontal "+c+" "+r)}function c(e,r){var o,n,i,u;"top"==e?(o=t.top+E,i="0"):(o=t.top+t.height-E-(t.bottom<0?-t.bottom:0),i="-100%"),"right"==r?(n=t.left+t.width-E,u="-100%"):"center"==r?(n=t.left+t.width/2,u="-50%"):(n=t.left+E,u="0"),T.css({left:n+"px",top:o+"px",transform:"translate("+u+","+i+")"}),k.attr("class","hidden")}function l(){T.css({left:"50%",top:"50%",transform:"translate(-50%, -50%)",margin:"0"}),k.attr("class","hidden")}if(!t)return void l();var a={bottom:e,right:o,left:n,top:i},f=!0;angular.forEach(r.current.tour.config.placementPriority,function(t){a[t]||(f=!1)});var h=!1;return angular.forEach(f?r.current.tour.config.placementPriority:r.config.placementPriority,function(t){!h&&a[t]()&&(h=!0)}),h?void 0:void c("bottom","center")}function m(t){return t?(x.top.css({height:t.top+"px"}),x.bottom.css({height:t.bottom+"px"}),x.left.css({top:t.top+"px",height:t.height+"px",width:t.left+"px"}),void x.right.css({top:t.top+"px",height:t.height+"px",width:t.right+"px"})):(x.top.css({height:"0px"}),x.bottom.css({height:"0px"}),x.left.css({top:"0px",height:"100%",width:"0px"}),void x.right.css({top:"0px",height:"100%",width:"0px"}))}var w=angular.element(window),b=angular.element(r.current.tour.config.scrollBox),x={all:o.find(".nzTour-masks"),top:o.find(".nzTour-masks .top"),right:o.find(".nzTour-masks .right"),bottom:o.find(".nzTour-masks .bottom"),left:o.find(".nzTour-masks .left")},T=o.find("#nzTour-box-wrap"),z=o.find("#nzTour-box"),k=o.find("#nzTour-tip"),D=(o.find("#nzTour-step"),o.find("#nzTour-close"),o.find("#nzTour-content")),y=o.find("#nzTour-inner-content"),M=(o.find("#nzTour-actions"),o.find("#nzTour-previous"),o.find("#nzTour-next"),!1),S=!1,E=15,$=120,H=250,L=!0,P={},W=!1;u(!0),s(!0),x.all.css("pointer-events",r.current.tour.config.mask.clickThrough?"none":"all"),r.current.tour.config.dark&&(z.addClass("dark-box"),E=7),x.top.add(x.right).add(x.bottom).add(x.left).css({"background-color":r.current.tour.config.mask.color}),r.current.tour.config.mask.scrollThrough===!1&&window.addWheelListener(x[0],i),r.$on("step",a);var j=r.throttle(c,16.666);w.bind("resize",j),w.bind("keydown",n),window.addWheelListener(window,j),window.addWheelListener(D[0],l),r.$on("remove",function(){w.unbind("resize DOMMouseScroll mousewheel scroll",j),w.unbind("keydown",n),window.removeWheelListener(D[0],l),r.current.tour.config.mask.scrollThrough===!1&&window.removeWheelListener(x[0],i)}),r.tryStop=function(){r.current.tour.config.mask.clickExit&&r.stop()}}}}]),window.angular.extendDeep=function i(t){return angular.forEach(arguments,function(e){e!==t&&angular.forEach(e,function(e,r){t[r]&&t[r].constructor&&t[r].constructor===Object?i(t[r],e):t[r]=e})}),t},!window.addWheelListener){var r,o,n="";window.addEventListener?r="addEventListener":(r="attachEvent",n="on"),o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",window.addWheelListener=function(e,r,n){t(e,o,r,n),"DOMMouseScroll"==o&&t(e,"MozMousePixelScroll",r,n)}}}();